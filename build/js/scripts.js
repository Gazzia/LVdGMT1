function round(e,t){var a=Math.pow(10,t||0);return Math.round(e*a)/a}const random=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,delay=(e,t,...a)=>setTimeout(e,t,...a);var player=new Player,bob=new NPC({name:"Bob",race:"Human",genre:"m",money:10});time.start(),game.loadPage(0);var spell_dev=new Spell("dev",function(){devMenu.toggle()}),gui=new dat.GUI({autoPlace:!1}),FOLDER_pl=gui.addFolder("Player"),pl_name=FOLDER_pl.add(player,"name").name("Nom"),pl_genre=FOLDER_pl.add(player,"genre",{Homme:"m",Femme:"f"}).name("Genre").onFinishChange(function(){game.refreshPage()}),pl_money=FOLDER_pl.add(player.money,"total").name("Argent").min(0).step(1).listen(),pl_health=FOLDER_pl.addFolder("Health"),pl_hp=pl_health.add(player.health,"current",0,player.health.max).step(1).listen(),pl_hpmax=pl_health.add(player.health,"max").min(0).step(1).listen().onFinishChange(function(){pl_hp.max(player.health.max)}),FOLDER_time=gui.addFolder("Time"),time_hours=FOLDER_time.add(time,"hours",{Aube:6,"Journée":10,"Crépuscule":19,Nuit:22}).name("Période").onFinishChange(function(){time.refreshPeriod(),game.refreshPage(),time.refreshClocks()}),time_days=FOLDER_time.add(time,"daysPlayed").name("Jours passés").min(0).step(1).listen().onFinishChange(function(){game.refreshPage()}),FOLDER_samples=gui.addFolder("GUI samples");FOLDER_samples.add(devEvents,"modal_sample"),FOLDER_samples.add(devEvents,"notif_sample");var FOLDER_events=gui.addFolder("Events trackers"),events_helper=FOLDER_events.addFolder("Messages d'aide"),events_player=FOLDER_events.addFolder("Player");for(var ev in Events)Events.hasOwnProperty(ev)&&(/(helper_)/g.test(ev)?events_helper.add(Events,ev).name(ev.replace(/(helper_)/g,"")):/(player_)/g.test(ev)?events_player.add(Events,ev).name(ev.replace(/(player_)/g,"")):FOLDER_events.add(Events,ev));var FOLDER_pageList=gui.addFolder("Go to page.."),Région_Soufflant=FOLDER_pageList.addFolder("Soufflant");for(var pgID in pageList){var pgName=pageList[pgID].locale.identifier;pageList[pgID].locale.interior&&(pgName=pageList[pgID].locale.interior+">"+pgName),pageList[pgID].locale.city&&(pgName=pageList[pgID].locale.city+">"+pgName),"Soufflant"==pageList[pgID].locale.région?Région_Soufflant.add({loadPage:game.loadPage.bind(this,pgID)},"loadPage").name(pgName):FOLDER_pageList.add({loadPage:game.loadPage.bind(this,pgID)},"loadPage").name(pgName)}var devContainer=document.getElementById("devMenu");devContainer.appendChild(gui.domElement),$(document).on("click",".playerMenu",function(e){var t=$(e.target||e.srcElement);console.log(t),(t.is(".playerMenu")||t.is(".head")||t.is(".clock"))&&playerMenu.toggle()});var pgdc=function(e,t){return t?pgdc(t,e%t):e},plContent=$(".playerMenu .content"),test=pgdc(plContent.height(),plContent.width());function toggle_color(e,t,a){var n=document.querySelector(e),r=n.style.backgroundColor;setTransitionDurations(n,a),n.style.backgroundColor=n.style.backgroundColor===r?t:r,console.log(n.style.backgroundColor)}function getStringFromMs(e){return e+"ms"}function setTransitionDurations(e,t){var a=getStringFromMs(t);["-webkit","-o","-moz"].forEach(function(t){e.style.setProperty(t+"-transition-duration",a)}),e.style.transitionDuration=a}window.innerWidth/window.innerHeight<.8&&$("body").addClass("mobile"),function(){Element.prototype.sdrag=function(e,t,a){var n=0,r=0,i=this,o=!1;function s(t){var o={};if(e&&e(i,t.pageX,n,t.pageY,r,o),"vertical"!==a){var s="pageX"in o?o.pageX:t.pageX;"startX"in o&&(n=o.startX),0=="skipX"in o&&(i.style.left=s-n+"px")}if("horizontal"!==a){var l="pageY"in o?o.pageY:t.pageY;"startY"in o&&(r=o.startY),0=="skipY"in o&&(i.style.top=l-r+"px")}}this.addEventListener("mousedown",function(e){if(!(e.currentTarget instanceof HTMLElement||e.currentTarget instanceof SVGElement))throw new Error("Your target must be an html element");o=!0;var t=i.style.left?parseInt(i.style.left):0,a=i.style.top?parseInt(i.style.top):0;n=e.pageX-t,r=e.pageY-a,window.addEventListener("mousemove",s)}),window.addEventListener("mouseup",function(e){!0===o&&(o=!1,window.removeEventListener("mousemove",s),t&&t(i,e.pageX,n,e.pageY,r))})}}(),document.querySelectorAll("#actionmenu")[0].sdrag();var files={paramsToSave:{get game_pageID(){return game.pageID},set game_pageID(e){game.pageID=e},get game_page_sceneID(){return game.page.sceneID},set game_page_sceneID(e){game.page.sceneID=e},get events(){return Events},set events(e){Events=e},get time_hours(){return time.hours},set time_hours(e){time.hours=e},get time_minutes(){return time.minutes},set time_minutes(e){time.minutes=e},get time_daysPlayed(){return time.daysPlayed},set time_daysPlayed(e){time.daysPlayed=e},get player_name(){return player.name},set player_name(e){player.name=e},get player_genre(){return player.genre},set player_genre(e){player.genre=e},get player_money(){return player.money.total},set player_money(e){player.money.total=e},get player_currentHP(){return player.health.current},set player_currentHP(e){player.health.current=e},get player_maxHP(){return player.health.max},set player_maxHP(e){player.health.max=e},get player_inv_itemList(){return player.inv._itemList},set player_inv_itemList(e){player.inv._itemList=e}},save(){for(param in this.paramsToSave)localStorage[`save_${param}`]=JSON.stringify(this.paramsToSave[param]);console.info("Jeu sauvegardé !")},load(){for(param in modal.close(),closeAllNotifications(),this.paramsToSave)this.paramsToSave[param]=JSON.parse(localStorage[`save_${param}`]);time.refreshPeriod(),time.refreshClocks(),game.loadPage(game.pageID),console.info("Jeu chargé !")}};function clickOnTrigger(e){var t=e.target.dataset.trigger,a=game.scene.triggers;if(1===e.which){for(trigger in a)if(t==a[trigger].trigText)for(action in $("#actionmenu ul").html(""),$("#actionmenu header").html(`Actions sur <b>${a[trigger].showName}</b>`),a[trigger].actions)$("#actionmenu ul").append(`<li class="${a[trigger].actions[action].style}" onclick="game.scene.triggers[${trigger}].actions[${action}].script();">${a[trigger].actions[action].name}</li>`);$("#actionmenu").css({display:"block",left:e.pageX-parseInt($("#actionmenu").css("min-width"),10)/2,top:e.pageY+5,animation:"open-actionmenu .3s ease forwards"})}else if(3===e.which)for(trigger in a)t==a[trigger].trigText&&a[trigger].RClick&&a[trigger].RClick()}function rightClickOnTrigger(e){var t=e.target.dataset.trigger,a=game.scene.triggers;for(trigger in a)t==a[trigger].trigText&&a[trigger].RClick&&a[trigger].RClick()}$(document).on("keydown",function(e){"Escape"==e.key&&gameMenu.toggle()}),$(document).on("contextmenu",function(){return!1}),$("#actionmenu").on("click",function(e){e.stopPropagation(),$(e.target||e.srcElement).is("li")&&$("#actionmenu").css("display","")}),$(document).on("click",function(e){e.target!=$("#actionmenu")&&$("#actionmenu").css("display","")}),$(document).on("click",".click",function(e){e.stopPropagation(),clickOnTrigger(e)}),$(".modal main, .main .notTitle").on("wheel",function(e){if(e.altKey||e.shiftKey)t=180;else var t=60;e.deltaY>0?this.scrollTop+=t:this.scrollTop-=t},!1),weird={isActive:!1,activate(){this.isActive=!0,$("html").css({"background-color":"black"}),$("body").css({"box-shadow":"0 0 3vh 2vh rgb(255, 0, 151), 0 0 9vh 10vh rgb(0, 255, 221), 0 0 15vh 10vh rgb(255, 0, 255), 0 0 25vh 15vh rgb(0, 255, 22)",animation:"weird_activate 10s ease forwards"}),el="<div id=coucoulol>Bienvenue dans le hardmode</div>",$("html").append(el)},desactivate(){this.isActive=!1,$("html").css({"background-color":"white"}),$("body").css({"box-shadow":"none",animation:"weird_desactivate 2s ease forwards"}),$("#coucoulol").remove()},toggle(){this.isActive?this.desactivate():this.activate()}};var spell_val=new Spell("lol",function(){weird.toggle()});
//# sourceMappingURL=scripts.js.map